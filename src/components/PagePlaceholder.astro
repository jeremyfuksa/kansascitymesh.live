---
interface Props {
  summary: string;
  tasks?: string[];
  docRefs?: string[];
  notes?: string[];
}

const { summary, tasks = [], docRefs = [], notes = [] } = Astro.props as Props;
const hasCards = tasks.length > 0 || docRefs.length > 0 || notes.length > 0;
const notesSpanClass = tasks.length > 0 && docRefs.length > 0 ? 'lg:col-span-2' : '';
---

<section class="space-y-10 lg:space-y-12">
  <div class="max-w-4xl">
    <p class="prose-intro text-base md:text-lg lg:text-xl">
      {summary}
    </p>
  </div>

  {hasCards && (
    <div class="grid gap-6 lg:grid-cols-2 xl:gap-8">
      {tasks.length > 0 && (
        <div class="flex h-full flex-col rounded-3xl border border-border-light bg-surface-200 p-6 shadow-sm dark:border-border-dark dark:bg-sand-800">
          <h2 class="text-lg font-semibold text-ink-900 dark:text-cream-50">Implementation TODOs</h2>
          <ol class="mt-5 list-decimal space-y-4 pl-5 text-sm text-ink-700 dark:text-cream-100">
            {tasks.map((task) => (
              <li class="leading-relaxed">{task}</li>
            ))}
          </ol>
        </div>
      )}

      {docRefs.length > 0 && (
        <div class="flex h-full flex-col rounded-3xl border border-dashed border-border-light p-6 dark:border-border-dark">
          <h2 class="text-base font-semibold uppercase tracking-wide text-ink-700 dark:text-cream-100">
            Source Documents
          </h2>
          <ul class="mt-4 space-y-3 text-sm text-ink-500 dark:text-cream-200">
            {docRefs.map((ref) => (
              <li>{ref}</li>
            ))}
          </ul>
        </div>
      )}

      {notes.length > 0 && (
        <div
          class={`rounded-3xl bg-kc-blue/5 p-6 text-sm text-ink-700 dark:bg-kc-blue/20 dark:text-cream-100 ${notesSpanClass}`}
        >
          <h2 class="text-base font-semibold text-kc-blue dark:text-kc-sky">Notes</h2>
          <ul class="mt-4 space-y-3">
            {notes.map((note) => (
              <li class="leading-relaxed">{note}</li>
            ))}
          </ul>
        </div>
      )}
    </div>
  )}
</section>
