---
/**
 * Displays a prominent alert banner with optional link.
 * Variant styling maps to Campfire semantic colors.
 */
type Variant = "info" | "warning" | "success";

interface Props {
  message: string;
  link?: string;
  linkText?: string;
  variant?: Variant;
}

const { message, link, linkText, variant = "info" } = Astro.props;

const variantClasses: Record<Variant, string> = {
  info: "bg-info-500/10 border-info-500 text-info-700",
  warning: "bg-warning-50 border-warning-500 text-warning-700",
  success: "bg-success-50 border-success-500 text-success-700",
};

const iconClasses: Record<Variant, string> = {
  info: "fa-circle-info",
  warning: "fa-triangle-exclamation",
  success: "fa-circle-check",
};
---
<div class={`border ${variantClasses[variant]} rounded-[20px] p-5 flex items-start gap-4 shadow-[0px_10px_30px_rgba(0,0,0,0.04)]`} role="alert">
  <span class="w-10 h-10 rounded-[12px] bg-white/60 flex items-center justify-center text-xl">
    <i class={`fa-solid ${iconClasses[variant]}`} aria-hidden="true"></i>
  </span>
  <div class="space-y-2">
    <p class="font-semibold text-[16px] leading-snug">{message}</p>
    {link && (
      <a
        href={link}
        class="inline-flex items-center gap-2 font-semibold text-primary-600 dark:text-primary-400 hover:text-meshtastic transition-colors"
        rel="noopener noreferrer"
        target={link.startsWith("/") ? undefined : "_blank"}
      >
        {linkText ?? link}
        <i class="fa-solid fa-arrow-right" aria-hidden="true"></i>
      </a>
    )}
  </div>
</div>
